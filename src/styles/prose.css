/* 앵커 스크롤 시 헤더에 가리지 않도록 오프셋 */
.prose :where(h1, h2, h3, h4, h5, h6) {
  scroll-margin-top: 5rem;
}

/* heading 앵커 링크 아이콘 */
.prose :where(h1, h2, h3, h4, h5, h6) {
  position: relative;
}
.prose .heading-anchor {
  position: absolute;
  left: -1em;
  top: 50%;
  transform: translateY(-50%);
  text-decoration: none;
  opacity: 0;
  color: var(--muted-foreground);
  transition: opacity 0.15s;
}
.prose .heading-anchor svg {
  display: block;
  width: 0.875em;
  height: 0.875em;
}
.prose :where(h1, h2, h3, h4, h5, h6):hover .heading-anchor {
  opacity: 1;
}
.prose .heading-anchor:hover {
  color: var(--foreground);
}

/* h2 스타일 */
.prose :where(h2) {
  font-size: 1.75em;
  padding-bottom: 0.3em;
  margin-bottom: 0.75em;
  border-bottom: 1px solid var(--border);
}
.prose :where(h2) > .heading-anchor {
  top: calc(50% - 0.15em);
}

/* 하이퍼링크 스타일 */
.prose :where(a):not(:where(.not-prose, .not-prose *)) {
  color: oklch(0.546 0.245 262.881);
  text-decoration: none;
}
.prose :where(a):not(:where(.not-prose, .not-prose *)):hover {
  color: oklch(0.424 0.199 265.638);
}

/* 인라인 코드블럭 */
.prose :where(code):not(:where(pre code)) {
  background-color: #f6f8fa;
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-weight: 400;
  overflow-wrap: break-word;
}

/* 인라인 코드블럭 앞뒤 backtick 제거 */
.prose :where(code)::before,
.prose :where(code)::after {
  content: none;
}

/* 다크모드 인라인 코드블럭 배경 */
.dark .prose :where(code):not(:where(pre code)) {
  background-color: oklch(0.269 0 0);
}

/* 다크모드 하이퍼링크 */
.dark .prose :where(a):not(:where(.not-prose, .not-prose *)) {
  color: oklch(0.707 0.165 254.624);
}
.dark .prose :where(a):not(:where(.not-prose, .not-prose *)):hover {
  color: oklch(0.788 0.153 252.289);
}

/* 다크모드 h2 border */
.dark .prose :where(h2) {
  border-bottom-color: oklch(1 0 0 / 10%);
}

/* shiki dual theme */
.shiki {
  background-color: #f6f8fa !important;
}

/* 다크모드 코드블럭 배경 어둡게 */
html.dark .shiki,
html.dark .shiki span {
  color: var(--shiki-dark) !important;
  background-color: var(--shiki-dark-bg) !important;
}
